---
title: 后端架构图
date: 2020-04-11 10:23:11
tags: [架构,脑图]
categories: 架构
---
# 后端架构

## 基础组件

    多线程
    队列
    高性能网络层
    插件
    压缩
    加密
    反射
    调度
    特性
    扩张方法
    表达式树
  
## 基础监控
  ### 业务监控
    业务操作完成量
    业务操作完成时间
  ### 用户行为
    访问人数、在线人数
    访问热点
    访问轨迹
  ### 软件应用监控
    执行性能，性能趋势报表图
        页面级别
        方法级别
        数据库操作
    可用性
    服务、页面使用量
    开源组件性能监视
  ### 软件系统监控
    磁盘
    内存
    CPU
    网络
  ### 硬件监控
    硬件资源的消耗趋势（容量规划）
    硬件资源的使用趋势（细化到进程）
    硬件资源的总体利用率
  ### 通用报警
    基于统计值
    基于状态
    事件处理流程
    短信群发平台
    集中化配置
    邮件、短信通道
    跨平台的客户端
    分组+权限+自定义间隔
    信息模板
    细节报警信息
## 页面引擎
  ### MVC扩展
    基础横切组件封装（ActionFilter等）
    模板集中存储+后台修改
    IOC支持
    执行性能
    组件全局注册
  ### 轻量级的ashx容器
  ### 组件
    脚本样式合并
    分布式会话
    验证码
    各种控件
## 横切关注
  ### 日志、异常、状态信息
    集中收集
        MongoDB
    后台集中查阅
    自动附加信息
    异步队列提交
  ### 通用性能
    只要提供Dictionary<string.long>数据源就可以实现性能监控
    多级分组
    通用性能查看后台（highchart+ajax)
    支持各个粒度的数据聚合
    数据类型支持TextValue、TotalValue、StateValue、ExpressionValue
    数据源支持推模式和拉模式
  ### 缓存
    本地缓存
    远端缓存
        基于Redis
    各种过期模式
        平滑过期
        绝对时间过期
        依赖过期
    过期回调
    容量限制
  ### 配置
    配置集中化（消除本地配置）
    支持横向扩容（同步）
    支持复杂类型（自定义类型）
        列表
        字典
        枚举
        继承
        抽象类
    配置后台（考虑多环境同步问题)
        考虑实现配置实用率跟踪
    自动根据默认值初始化
        考虑默认值的使用策略
    全局配配置和私有配置，支持分组
    更新回调
        考虑细化到某个点
    基于行的版本（同步）控制
    高性能
        缓存+数据库
  ### 同步
    任意数据的同步支持
    水平扩容支持
    拉模式和推模式支持
  ### NOSQL客户端
    配置集中
    统一的客户端
    集群管理
  ### 权限
  ### IOC
  ### AOP
## 分布式数据访问
  ### ORM特性
    查询表达器
    缓存（多级）
    关系
    延迟加载
    映射配置
    代码生成
    多数据库支持
    锁支持
    枚举支持
  ### 其他特性
    监控性能
    NOSQL集成
    领域驱动支持
  ### Shard特性
    分库规则和路由
    分表规则和路由
    集群
        高可用
    负载均衡策略
        软负载
    可用性探测
    读写分离
        高性能
    分布式事物
    多写
    迁移辅助
    基于元数据还是映射的策略
    跨节点排序分页支持
## 服务端组件
  分布式文件系统
  分布式缓存系统
  分布式计算
  分布式存储系统
  分布式队列系统
  分布式计数器
  分布式锁
## 分布式服务
  ### 远程调用
    同步调用
    异步调用
    双向调用
        事件回调
    （软）负载均衡
        随机、轮训、最小调用
    高级QoS均衡
        根据性能决定均衡策略
    失败容错
        重试、日志、后台容错
    调用拦截
        增加横切
    平滑重启
    优雅升降级
    分布式事务
    批量调用
        提高性能
    本地伪装
        本地Mock逻辑用于容错
    隐式传参
        客户端和服务端同步上下文
    服务分组
        允许一个接口多种实现
    客户端代理生成插件
        异步调用
  ### 协议集成
    Hession
    WebService
    Protobuf
    自定义二进制序列化
  ### 集群监控
    可用性
    性能
    版本
    路径
    依赖
  ### 动态部署
    服务容器
        守护、更新
    自动部署
    平滑回滚
  ### 服务治理
    服务注册发现
    服务测试
    服务路由
        机房感知、机器、上下文
    服务安全限制
        调用验证
        信息加密
    服务依赖关系
    服务负责人
        信息通知
    服务文档
    服务声明周期
    服务命名空间
    服务限流
        并发、流程
# 脑图
![](后端架构.png)        